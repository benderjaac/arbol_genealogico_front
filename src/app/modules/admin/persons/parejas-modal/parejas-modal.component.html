<h2 class="text-2xl font-semibold text-center mb-6">Pareja de: {{persona?.nombreCompleto}}</h2>
<div>

    <p-table
        [value]="parejas"
        [loading]="loading"
        responsiveLayout="scroll"
        class="p-datatable-sm"
    >

        <ng-template pTemplate="header">
            <tr>
                <th>Pareja</th>
                <th class="text-center">Hijos</th>
                <th class="text-center">Acciones</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-pareja>
            <tr>
                <td>
                    {{ pareja.spouse.nombreCompleto }}
                </td>

                <td class="text-center">
            <span class="font-semibold">
              {{ pareja.childrenCount }}
            </span>
                </td>

                <td class="text-center">
                    <button
                        pButton
                        icon="pi pi-eye"
                        class="p-button-text p-button-sm"
                        pTooltip="Ver hijos"
                        (click)="verHijos(pareja)"
                    ></button>

                    <button
                        pButton
                        icon="pi pi-trash"
                        class="p-button-text p-button-sm p-button-danger"
                        pTooltip="Eliminar uniÃ³n"
                        (click)="eliminarUnion(pareja)"
                    ></button>
                </td>
            </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="3" class="text-center py-4">
                    No tiene parejas registradas
                </td>
            </tr>
        </ng-template>

    </p-table>

    <div class="flex justify-content-end mt-4">
        <button
            pButton
            icon="pi pi-plus"
            label="Nueva pareja"
            (click)="creatingMode = true"
        ></button>
    </div>

</div>

<!-- ============================= -->
<!-- CREAR NUEVA PAREJA -->
<!-- ============================= -->

<div *ngIf="creatingMode" class="mt-3">

    <h5 class="mb-3">Seleccionar persona</h5>

    <!-- Buscador
    <p-autoComplete
        [(ngModel)]="selectedSpouse"
        [suggestions]="filteredPersons"
        (completeMethod)="buscarPersonas($event)"
        field="nombreCompleto"
        [dropdown]="true"
        placeholder="Buscar persona..."
        [forceSelection]="true"
    >
    </p-autoComplete-->

    <div class="flex justify-content-end gap-2 mt-4">

        <button
            pButton
            label="Cancelar"
            class="p-button-text"
            (click)="cancelCreate()"
        ></button>

        <button
            pButton
            label="Guardar"
            icon="pi pi-check"
            [disabled]="!selectedSpouse"
            (click)="crearUnion()"
        ></button>

    </div>

</div>
